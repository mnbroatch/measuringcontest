{
  "entities": [
    {
      "name": "mainGrid",
      "type": "Grid",
      "width": 3,
      "height": 3
    },
    {
      "name": "playerMarker",
      "perPlayer": true,
      "count": "Infinity"
    }
  ],
  "sharedBoard": [{ "name": "mainGrid" }],
  "minPlayers": 2,
  "maxPlayers": 2,
  "turn": {
    "minMoves": 1,
    "maxMoves": 1
  },
  "moves": {
    "placePlayerMarker": {
      "type": "PlaceNew",
      "entity": {
        "restrictions": [{
          "type": "Is",
          "matcher": {
            "name": "playerMarker",
            "player": {
              "type": "ctxPath",
              "path": ["currentPlayer"]
            }
          }
        }]
      },
      "arguments": {
        "destination": {
          "playerChoice": true,
          "restrictions": [
            {
              "type": "Is",
              "matcher": { "type": "Space" }
            },
            {
              "type": "Not",
              "conditions": [{"type": "Contains"}]
            }
          ]
        }
      }
    }
  },
  "endIf": [
    {
      "conditions": [{
        "type": "Some",
        "target": {
          "matchMultiple": true,
          "restrictions": [{
            "type": "Is",
            "matcher": { "type": "Space" }
          }
        ]},
        "conditions": [{
          "type": "InLine",
          "target": {
            "type": "contextPath",
            "path": ["loopTarget"]
          },
          "sequence": [
            {
              "minCount": {
                "type": "expression",
                "expression": "3"
              },
              "conditions": [{
                "type": "ContainsSame",
                "properties": ["player"]
              }]
            }
          ]
        }]
      }],
      "result": {
        "winner": {
          "type": "contextPath",
          "path": ["results", 0, "result", "entities", 0, "attributes", "player"]
        }
      }
    },
    {
      "conditions": [{
        "type": "Every",
        "target": {
          "matchMultiple": true,
          "restrictions": [
            {
              "type": "Is",
              "target": { "type": "Parent" },
              "matcher": { "name": "mainGrid" }
            }
          ]
        },
        "conditions": [{
          "target": {
            "type": "contextPath",
            "path": ["loopTarget"]
          },
          "type": "Contains"
        }]
      }],
      "result": { "draw": true }
    }
  ]
}
