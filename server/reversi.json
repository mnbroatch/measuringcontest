{
  "entities": [
    {
      "name": "mainGrid",
      "type": "Grid",
      "width": 8,
      "height": 8
    },
    {
      "name": "disc",
      "state": { "player": "0" },
      "count": "Infinity"
    }
  ],
  "sharedBoard": [{ "name": "mainGrid" }],
  "initialPlacements": [
    {
      "entity": {
        "name": "disc",
        "state": { "player": "0" }
      },
      "destination": { "index": 27 }
    },
    {
      "entity": {
        "name": "disc",
        "state": { "player": "0" }
      },
      "destination": { "index": 36 }
    },
    {
      "entity": {
        "name": "disc",
        "state": { "player": "1" }
      },
      "destination": { "index": 28 }
    },
    {
      "entity": {
        "name": "disc",
        "state": { "player": "1" }
      },
      "destination": { "index": 35 }
    }
  ],
  "minPlayers": 2,
  "maxPlayers": 2,
  "turn": {
    "minMoves": 1,
    "maxMoves": 1
  },
  "moves": {
    "placeDisc": {
      "type": "MoveEntity",
      "arguments": {
        "entity": {
          "automatic": true,
          "location": "bank", 
          "matcher": {
            "name": "disc"
          },
          "state": {
            "player": "Current"
          }
        },
        "destination": {
          "conditions": [
            {
              "type": "Is",
              "matcher": { "type": "Space" }
            },
            {
              "type": "Not",
              "conditions": [{ "type": "Contains" }]
            },
            {
              "type": "Would",
              "conditions": [{
                "type": "InLine",
                "sequence": [
                  {
                    "conditions": [{
                      "type": "Contains",
                      "conditions": [{
                        "type": "Is",
                        "matcher": {
                          "player": "Current"
                        }
                      }]
                    }]
                  },
                  {
                    "minCount": 1,
                    "conditions": [
                      {
                        "type": "Not",
                        "conditions": [{
                          "type": "Contains",
                          "conditions": [{
                            "type": "Is",
                            "matcher": {
                              "player": "Current"
                            }
                          }]
                        }]
                      },
                      {
                        "type": "ContainsSame",
                        "properties": ["player"]
                      }
                    ]
                  },
                  {
                    "conditions": [{
                      "type": "Contains",
                      "conditions": [{
                        "type": "Is",
                        "matcher": {
                          "player": "Current"
                        }
                      }]
                    }]
                  }
                ]
              }]
            }
          ]
        }
      },
      "then": [{
        "type": "ForEach",
        "arguments": {
          "targets": {
            "automatic": true,
            "contextPath": [
              "moveConditionResults",
              0,
              "conditionResults",
              "destination",
              "results",
              2,
              "results",
              0,
              "matches",
              { "flatten": true, "map": ["entities"] },
              { "flatten": true }
            ]
          }
        },
        "move": {
          "type": "ForEach",
          "arguments": { "targets": {} },
          "move": {
            "type": "SetState",
            "arguments": { "entity": {} },
            "state": {
              "player": "Current"
            }
          }
        }
      }]
    }
  },
  "endIf": []
}
